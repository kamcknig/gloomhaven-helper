<app-header></app-header>

<div *ngIf="(appService.scenarioStore.viewMode$ | async) === 'normal'; else listView"
     class="detail-content">
  <monster-detail *ngFor="let monster of sortedMonsters$ | async; index as i"
                  [monster]="monster"
                  [ngClass]="{'active': (combatService.store.turn$ | async) === i + 1 }">
  </monster-detail>
</div>

<ng-template #listView>
  <div class="list-content">
    <div class="monster-list-wrapper">
      <monster-list-item *ngFor="let monster of sortedMonsters$ | async; index as i"
                         [monster]="monster"
                         [active]="(combatService.store.turn$ | async) === i + 1">
      </monster-list-item>
    </div>

    <div class="details-content">
      <monster-detail
        *ngIf="!!(combatService.store.turn$ | async) && (sortedMonsters$ | async)?.[(combatService.store.turn$ | async) - 1] as monster"
        [monster]="monster">
      </monster-detail>
    </div>
  </div>
</ng-template>

<button mat-mini-fab
        class="list-style-button"
        (click)="appService.toggleViewMode$.next()">
  <mat-icon>list</mat-icon>
</button>

<button class="activate-monster"
        type="button"
        mat-fab
        extended
        color="accent"
        (click)="monsterService.selectMonsterToActivate().subscribe()">M
</button>
